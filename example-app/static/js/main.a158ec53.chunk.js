(this["webpackJsonpepsolar-app"]=this["webpackJsonpepsolar-app"]||[]).push([[0],{14:function(e,t,r){},15:function(e,t,r){},17:function(e,t,r){"use strict";r.r(t);var a=r(1),l=r.n(a),n=r(7),i=r.n(n),s=(r(14),r(9)),c=r(5),o=r(4),d=(r(15),r(0));function j(e){var t=e.real_time,r=e.statistics,a=e.coils,l=e.discrete;return Object(d.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:750.696,height:452.367,viewBox:"0 0 198.622 119.689",children:[Object(d.jsxs)("defs",{children:[Object(d.jsx)("marker",{id:"prefix__c",refX:0,refY:0,orient:"auto",overflow:"visible",children:Object(d.jsx)("path",{d:"M-1.926-1.21L1.352-.005l-3.278 1.206a2.05 2.05 0 000-2.411z",fillRule:"evenodd",stroke:"#000",strokeWidth:.1875,strokeLinejoin:"round"})}),Object(d.jsx)("marker",{orient:"auto",refY:0,refX:0,id:"prefix__b",overflow:"visible",children:Object(d.jsx)("path",{d:"M-1.926-1.21L1.352-.005l-3.278 1.206a2.05 2.05 0 000-2.411z",fillRule:"evenodd",stroke:"#000",strokeWidth:.1875,strokeLinejoin:"round"})}),Object(d.jsx)("marker",{orient:"auto",refY:0,refX:0,id:"prefix__a",overflow:"visible",children:Object(d.jsx)("path",{d:"M-1.926-1.21L1.352-.005l-3.278 1.206a2.05 2.05 0 000-2.411z",fillRule:"evenodd",stroke:"#000",strokeWidth:.1875,strokeLinejoin:"round"})})]}),Object(d.jsx)("path",{fill:"#002",fillOpacity:.651,stroke:"#000",strokeLinejoin:"bevel",strokeOpacity:.711,d:"M34.67 35.983h71.815v52.161H34.67z",transform:"matrix(.31867 0 .12235 .31867 4.709 23.045)"}),Object(d.jsx)("path",{fill:"#00f",stroke:"#ff0",strokeWidth:3,strokeLinejoin:"bevel",d:"M43.089 26.458h71.815v52.161H43.089z",transform:"matrix(.31867 0 .12235 .31867 4.709 23.045)"}),Object(d.jsx)("path",{d:"M60.854 26.458V78.62M79.224 26.08v52.35M97.782 27.025V78.43M42.522 45.735h72.383M43.278 62.555h71.816",fill:"none",stroke:"#ff0",strokeWidth:3,transform:"matrix(.31867 0 .12235 .31867 4.709 23.045)"}),Object(d.jsxs)("g",{transform:"translate(56.813 7.427) scale(.77114)",children:[Object(d.jsx)("path",{fill:"#ccc",fillOpacity:.651,stroke:"#000",strokeWidth:1.561,strokeLinejoin:"bevel",strokeOpacity:.711,d:"M45.124 31.887h36.425v19.881H45.124z"}),Object(d.jsx)("path",{fill:"green",d:"M50.129 47.319h22.384v2.224H50.129z"}),Object(d.jsx)("circle",{r:.861,cy:40.65,cx:73.973,fill:"#00f"}),Object(d.jsx)("circle",{cx:52.418,cy:37.426,r:1.039,fill:"#0f0"}),Object(d.jsx)("circle",{r:1.039,cy:37.426,cx:55.593,fill:"#0f0"})]}),Object(d.jsx)("path",{d:"M38.837 47.937h29.057",fill:"none",stroke:"#000",strokeWidth:3,markerEnd:"url(#prefix__a)",transform:"translate(14.737 -5.714)"}),Object(d.jsx)("path",{d:"M108.687 47.937h29.057",fill:"none",stroke:"#000",strokeWidth:3,markerEnd:"url(#prefix__b)",transform:"translate(14.737 -5.714)"}),Object(d.jsxs)("g",{transform:"translate(14.737 1.165)",stroke:"#000",children:[Object(d.jsx)("ellipse",{ry:7.149,rx:7.717,cy:33.777,cx:155.48,fill:a.manual_control_load?"#ff0":"#fff",strokeWidth:.5,strokeLinejoin:"bevel"}),Object(d.jsx)("path",{d:"M155.456 26.776a7.358 7.358 0 00-7.35 7.358c.342 2.747 1.284 3.75 3.173 5.822l.835 1.088v8.797h6.244v-8.797l1.244-1.183c1.764-1.93 3.22-2.639 3.22-5.727a7.358 7.358 0 00-7.357-7.358z",fill:"none",strokeWidth:2.124,strokeLinejoin:"bevel"}),Object(d.jsx)("path",{d:"M152.521 48.048l5.67-1.52M152.521 46.175l5.67-1.52M152.521 44.302l5.67-1.52M152.521 42.803l5.67-1.519",fill:"none",strokeWidth:.849}),Object(d.jsx)("path",{d:"M153.142 40.987l-1.749-6.526",fill:"none",strokeWidth:.265}),Object(d.jsx)("path",{d:"M157.64 40.984l1.904-6.52",fill:"none",strokeWidth:.276}),Object(d.jsx)("path",{d:"M151.393 34.46c.027.003.083.034.081.007-.009-.104-.219-.326-.236-.52-.044-.48.287-.98.732-1.158.167-.066.412-.076.59-.118.228-.052.238-.046.45.048.016.007.036.01.047.023.31.4.466.87.52 1.37.02.196.017.394.023.591.001.044-.018.342-.07.378-.206.137-.357-.17-.402-.307-.061-.183-.048-.22-.048-.402 0-.715.34-1.019.992-1.252.165-.059.395-.12.567-.07.199.056.396.177.473.377.09.232.282 1.408-.284 1.181-.137-.055-.148-.108-.236-.236-.048-.07-.111-.133-.142-.212a1.31 1.31 0 01.071-1.134c.052-.097.2-.156.284-.213.033-.022.058-.054.094-.07.111-.051.31-.066.425-.072.326-.017.174.011.426.095.045.015.099.002.141.024.222.11.484.565.591.78a.924.924 0 01.047.613c-.004.016.01.034 0 .048-.01.014-.032.014-.047.023-.135.081-.328.076-.425-.07-.375-.562-.296-.997.189-1.442.338-.31 1.216-.37 1.512.024.251.335.298 1.077.07 1.417-.015.024-.05.027-.07.048-.036.035-.056.085-.095.118-.012.01-.032-.004-.047 0-.028.007-.043.047-.071.047-.187 0-.213-.315-.26-.496-.193-.754.293-1.618 1.063-1.796.201-.046.669-.067.85.024.168.084.201.32.26.496.015.045-.007.095 0 .142.009.042.042.076.048.118.021.152.007.319.023.472.019.174.06.346.071.52.015.236-.007.475-.023.709a.351.351 0 01-.048.142c-.005.01-.024.034-.023.023.005-.096.025-.19.038-.286",fill:"none",strokeWidth:.265})]}),Object(d.jsx)("path",{d:r.net_battery_current<0?"M90.902 90.417v-29.057":"M90.902 56.36v29.057",fill:"none",stroke:"#000",strokeWidth:3,markerEnd:"url(#prefix__c)",transform:"translate(14.737 -5.714)"}),Object(d.jsx)("text",{style:{lineHeight:1.25},x:43.845,y:40.595,fontWeight:400,fontSize:9,fontFamily:"Algerian",letterSpacing:0,wordSpacing:0,strokeWidth:.265,transform:"translate(14.737 -5.714)",children:Object(d.jsxs)("tspan",{x:43.845,y:40.595,children:[t.pv_power," W"]})}),Object(d.jsx)("text",{y:40.595,x:114.149,style:{lineHeight:1.25},fontWeight:400,fontSize:9,fontFamily:"Algerian",letterSpacing:0,wordSpacing:0,strokeWidth:.265,transform:"translate(14.737 -5.714)",children:Object(d.jsxs)("tspan",{y:40.595,x:114.149,children:[t.load_power," W"]})}),Object(d.jsx)("text",{style:{lineHeight:1.25},x:101.298,y:74.159,fontWeight:400,fontSize:9,fontFamily:"Algerian",letterSpacing:0,wordSpacing:0,strokeWidth:.265,transform:"translate(14.737 -5.714)",children:Object(d.jsxs)("tspan",{x:101.298,y:74.159,children:[h(r.net_battery_current<0?Math.abs(t.battery_voltage*r.net_battery_current):t.battery_charging_power)," W"]})}),Object(d.jsxs)("g",{children:[Object(d.jsx)("path",{fill:"#999",stroke:"#000",strokeWidth:.26,strokeLinejoin:"bevel",d:"M90.61 88.739h30.088v17.699H90.61z"}),Object(d.jsx)("path",{stroke:"#000",strokeWidth:.4,strokeLinejoin:"bevel",d:"M91.815 85.48h2.422v3.103h-2.422z"}),Object(d.jsx)("path",{stroke:"#000",strokeWidth:.4,strokeLinejoin:"bevel",d:"M91.815 85.48h2.422v3.103h-2.422zM116.397 85.48h2.422v3.103h-2.422z"}),Object(d.jsx)("path",{fill:"#fff",stroke:"#000",strokeWidth:.5,strokeLinejoin:"bevel",d:"M92.608 90.802h26.326v13.764H92.608z"}),Object(d.jsx)("path",{fill:"#0f0",d:"M92.832 90.884h".concat(.25897*t.battery_soc,"v13.418H92.832z")}),Object(d.jsx)("path",{fill:"none",stroke:"#000",strokeWidth:.5,strokeLinejoin:"bevel",d:"M92.608 90.802h26.326v13.764H92.608z"})]}),!l.day_night&&Object(d.jsxs)("g",{transform:"matrix(.6832 0 0 .6832 26.148 1.212)",children:[Object(d.jsx)("circle",{r:7.918,cy:17.09,cx:23.788,fill:"#ff0"}),Object(d.jsx)("path",{d:"M10.067 17.09h4.158M33.35 17.09h4.158M23.788 3.37v4.158M23.788 26.653v4.158M33.49 7.388l-2.94 2.94M17.026 23.852l-2.94 2.94M33.49 26.792l-2.94-2.94M17.026 10.328l-2.94-2.94",fill:"none",stroke:"#ff0"})]}),l.day_night&&Object(d.jsxs)("g",{transform:"matrix(.6832 0 0 .6832 26.148 1.212)",children:[Object(d.jsx)("circle",{cx:23.788,cy:17.09,r:7.918,fill:"#ff0"}),Object(d.jsx)("path",{d:"M21.304 24.609a7.918 7.918 0 01-5.208-9.395 7.918 7.918 0 018.949-5.941l-1.257 7.817z"})]})]})}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return 0===e?"0":e.toFixed(t).replace(/[.0]+$/,"")}var b=r(8),_=["voltage","current","power"],u={pv:1,battery:4,load:7};function x(e){var t=e.log,r=Object(a.useState)("voltage"),l=Object(o.a)(r,2),n=l[0],i=l[1],s=Object(a.useRef)();return Object(a.useEffect)((function(){if(s.current){var e=s.current.getContext("2d"),r=400*devicePixelRatio,a=300*devicePixelRatio;s.current.width=r,s.current.height=a;var l=Math.ceil(function(e,t){var r=Object.values(u).map((function(e){return e+_.indexOf(t)})),a=e.map((function(e){return r.map((function(t){return e[t]}))})).flat();return Math.max.apply(Math,Object(c.a)(a))}(t,n)),i=36e5,o=20*devicePixelRatio,d=r-2*o,j=a-2*o,h=j/l,b=d/i;e.translate(o,o),e.strokeRect(0,0,d,j),e.beginPath();for(var x=0;x<=l;x++)e.moveTo(0,j-x*h),e.lineTo(d,j-x*h);if(e.lineWidth=.5,e.stroke(),t.length<1)return;var g=9*devicePixelRatio;e.font="".concat(g,"pt sans-serif"),e.textAlign="right",e.fillText("0",-.5*g,j),e.fillText(l.toString(),-.5*g,0);var v=new Date(t[t.length-1][0]),f=new Date(+v-i),y=new Intl.DateTimeFormat([],{timeStyle:"short"});e.fillText(y.format(v),d,j+1.2*g),e.textAlign="left",e.fillText(y.format(f),0,j+1.2*g);var p=Date.now(),m={innerWidth:d,innerHeight:j,xScale:b,yScale:h,duration:i};O(e,t,p,m,u.pv+_.indexOf(n),"#ff0000"),O(e,t,p,m,u.battery+_.indexOf(n),"#00ff00"),O(e,t,p,m,u.load+_.indexOf(n),"#0000ff")}}),[t,n]),Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:function(){return i("voltage")},style:{fontWeight:"voltage"===n?"bold":"normal"},children:"Voltage"}),Object(d.jsx)("button",{onClick:function(){return i("current")},style:{fontWeight:"current"===n?"bold":"normal"},children:"Current"}),Object(d.jsx)("button",{onClick:function(){return i("power")},style:{fontWeight:"power"===n?"bold":"normal"},children:"Power"}),Object(d.jsx)("canvas",{ref:s,style:{width:400,height:300}})]})}function O(e,t,r,a,l,n){var i=a.innerWidth,s=a.innerHeight,c=a.xScale,o=a.yScale,d=a.duration;e.beginPath();var j,h=Object(b.a)(t);try{for(h.s();!(j=h.n()).done;){var _=j.value,u=r-+new Date(_[0]);u<d?e.lineTo(i-u*c,s-_[l]*o):e.moveTo(i-u*c,s-_[l]*o)}}catch(x){h.e(x)}finally{h.f()}e.lineWidth=1,e.strokeStyle=n,e.stroke()}var g=function(){var e=Object(a.useState)(null),t=Object(o.a)(e,2),r=t[0],l=t[1],n=Object(a.useState)([]),i=Object(o.a)(n,2),h=i[0],b=i[1];return Object(a.useEffect)(_,[]),Object(a.useEffect)((function(){var e=setInterval(_,3e4);return function(){return clearInterval(e)}}),[]),Object(a.useEffect)((function(){if(r){var e=[r.status.date_time,r.real_time.pv_voltage,r.real_time.pv_current,r.real_time.pv_power,r.real_time.battery_voltage,r.real_time.battery_charging_current,r.real_time.battery_charging_power,r.real_time.load_voltage,r.real_time.load_current,r.real_time.load_power];b((function(t){return[].concat(Object(c.a)(t),[e])}))}}),[r]),r?Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("div",{className:"real_time",children:[Object(d.jsxs)("fieldset",{children:[Object(d.jsx)("legend",{children:"Solar Information"}),Object(d.jsx)("label",{htmlFor:"pv_power",children:"Solar Power (W)"}),Object(d.jsx)("input",{readOnly:!0,id:"pv_power",value:r.real_time.pv_power}),Object(d.jsx)("label",{htmlFor:"pv_voltage",children:"Solar Voltage (V)"}),Object(d.jsx)("input",{readOnly:!0,id:"pv_voltage",value:r.real_time.pv_voltage}),Object(d.jsx)("label",{htmlFor:"pv_current",children:"Solar Current (A)"}),Object(d.jsx)("input",{readOnly:!0,id:"pv_current",value:r.real_time.pv_current}),Object(d.jsx)("label",{htmlFor:"pv_voltage_status",children:"Solar Status"}),Object(d.jsx)("input",{readOnly:!0,id:"pv_voltage_status",value:r.status.charging_status.pv_voltage_status}),Object(d.jsx)("label",{htmlFor:"max_pv_voltage_today",children:"Max Voltage (V)"}),Object(d.jsx)("input",{readOnly:!0,id:"max_pv_voltage_today",value:r.statistics.max_pv_voltage_today}),Object(d.jsx)("label",{htmlFor:"min_pv_voltage_today",children:"Min Voltage (V)"}),Object(d.jsx)("input",{readOnly:!0,id:"min_pv_voltage_today",value:r.statistics.min_pv_voltage_today})]}),Object(d.jsxs)("fieldset",{style:{flex:2},children:[Object(d.jsx)("legend",{children:"Battery Information"}),Object(d.jsx)("label",{htmlFor:"battery_voltage",children:"Battery Voltage (V)"}),Object(d.jsx)("input",{readOnly:!0,id:"battery_voltage",value:r.real_time.battery_voltage}),Object(d.jsx)("label",{htmlFor:"battery_charging_current",children:"Battery Current (A)"}),Object(d.jsx)("input",{readOnly:!0,id:"battery_charging_current",value:r.real_time.battery_charging_current}),Object(d.jsx)("label",{htmlFor:"battery_charging_power",children:"Battery Power (W)"}),Object(d.jsx)("input",{readOnly:!0,id:"battery_charging_power",value:r.real_time.battery_charging_power}),Object(d.jsx)("label",{htmlFor:"max_battery_voltage_today",children:"Max Voltage (V)"}),Object(d.jsx)("input",{readOnly:!0,id:"max_battery_voltage_today",value:r.statistics.max_battery_voltage_today}),Object(d.jsx)("label",{htmlFor:"min_battery_voltage_today",children:"Min Voltage (V)"}),Object(d.jsx)("input",{readOnly:!0,id:"min_battery_voltage_today",value:r.statistics.min_battery_voltage_today}),Object(d.jsx)("label",{htmlFor:"battery_temperature",children:"Battery Temp (\xb0C)"}),Object(d.jsx)("input",{readOnly:!0,id:"battery_temperature",value:r.real_time.battery_temperature}),Object(d.jsx)("label",{htmlFor:"battery_soc",children:"Battery SOC (%)"}),Object(d.jsx)("input",{readOnly:!0,id:"battery_soc",value:r.real_time.battery_soc}),Object(d.jsx)("label",{htmlFor:"charging_phase",children:"Charging Status"}),Object(d.jsx)("input",{readOnly:!0,id:"charging_phase",value:r.status.charging_status.charging_phase}),Object(d.jsx)("label",{htmlFor:"battery_status_voltage",children:"Battery Status"}),Object(d.jsx)("input",{readOnly:!0,id:"battery_status_voltage",value:r.status.battery_status.battery_status_voltage})]}),Object(d.jsxs)("fieldset",{children:[Object(d.jsx)("legend",{children:"DC Load Information"}),Object(d.jsx)("label",{htmlFor:"load_current",children:"Load Current (A)"}),Object(d.jsx)("input",{readOnly:!0,id:"load_current",value:r.real_time.load_current}),Object(d.jsx)("label",{htmlFor:"load_voltage",children:"Load Voltage (V)"}),Object(d.jsx)("input",{readOnly:!0,id:"load_voltage",value:r.real_time.load_voltage}),Object(d.jsx)("label",{htmlFor:"load_power",children:"Load Power (W)"}),Object(d.jsx)("input",{readOnly:!0,id:"load_power",value:r.real_time.load_power}),Object(d.jsx)("label",{htmlFor:"manual_load_control",children:"Load Status"}),Object(d.jsx)("input",{readOnly:!0,id:"manual_load_control",value:r.coils.manual_control_load?"ON":"OFF"})]}),Object(d.jsxs)("fieldset",{children:[Object(d.jsx)("legend",{children:"Controller Information"}),Object(d.jsx)("label",{htmlFor:"charger_temperature",children:"Device Temperature (\xb0C)"}),Object(d.jsx)("input",{readOnly:!0,id:"charger_temperature",value:r.real_time.charger_temperature}),Object(d.jsx)("label",{htmlFor:"running",children:"Device Status"}),Object(d.jsx)("input",{readOnly:!0,id:"running",value:r.status.charging_status.fault?"FAULT":r.status.charging_status.running?"RUNNING":"STANDBY"}),Object(d.jsx)("label",{htmlFor:"date_time",children:"Date/Time"}),Object(d.jsx)("input",{readOnly:!0,id:"date_time",value:r.status.date_time})]})]}),Object(d.jsxs)("div",{className:"lower-panel",children:[Object(d.jsxs)("div",{className:"energy",children:[Object(d.jsxs)("fieldset",{children:[Object(d.jsx)("legend",{children:"Energy Generated (kWh)"}),Object(d.jsx)("label",{htmlFor:"generated_energy_today",children:"Daily"}),Object(d.jsx)("input",{readOnly:!0,id:"generated_energy_today",value:r.statistics.generated_energy_today}),Object(d.jsx)("label",{htmlFor:"generated_energy_this_month",children:"Monthly"}),Object(d.jsx)("input",{readOnly:!0,id:"generated_energy_this_month",value:r.statistics.generated_energy_this_month}),Object(d.jsx)("label",{htmlFor:"generated_energy_this_year",children:"Annual"}),Object(d.jsx)("input",{readOnly:!0,id:"generated_energy_this_year",value:r.statistics.generated_energy_this_year}),Object(d.jsx)("label",{htmlFor:"total_generated_energy",children:"Total"}),Object(d.jsx)("input",{readOnly:!0,id:"total_generated_energy",value:r.statistics.total_generated_energy})]}),Object(d.jsxs)("fieldset",{children:[Object(d.jsx)("legend",{children:"Energy Consumed (kWh)"}),Object(d.jsx)("label",{htmlFor:"consumed_energy_today",children:"Daily"}),Object(d.jsx)("input",{readOnly:!0,id:"consumed_energy_today",value:r.statistics.consumed_energy_today}),Object(d.jsx)("label",{htmlFor:"consumed_energy_this_month",children:"Monthly"}),Object(d.jsx)("input",{readOnly:!0,id:"consumed_energy_this_month",value:r.statistics.consumed_energy_this_month}),Object(d.jsx)("label",{htmlFor:"consumed_energy_this_year",children:"Annual"}),Object(d.jsx)("input",{readOnly:!0,id:"consumed_energy_this_year",value:r.statistics.consumed_energy_this_year}),Object(d.jsx)("label",{htmlFor:"total_consumed_energy",children:"Total"}),Object(d.jsx)("input",{readOnly:!0,id:"total_consumed_energy",value:r.statistics.total_consumed_energy})]})]}),Object(d.jsx)("div",{className:"diagram",children:Object(d.jsx)(j,Object(s.a)({},r))}),Object(d.jsx)("div",{className:"graph",children:Object(d.jsx)(x,{log:h})})]}),Object(d.jsxs)("p",{children:["Clone on ",Object(d.jsx)("a",{href:"https://github.com/IJMacD/epsolar-app",children:"GitHub"}),"."]})]}):Object(d.jsx)("p",{children:"Loading"});function _(){fetch("/PhpEpsolarTracer/example_json.php").then((function(e){return e.json()})).then(l)}};i.a.render(Object(d.jsx)(l.a.StrictMode,{children:Object(d.jsx)(g,{})}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.a158ec53.chunk.js.map